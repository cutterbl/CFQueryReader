Ext.data.CFQueryReader=Ext.extend(Ext.data.ArrayReader,{read:function(response){var json=response.responseText;var o=eval("("+json+")");if(!o){throw{message:"CFQueryReader.read: Json object not found"}}return this.readRecords(o)},readRecords:function(a){this.jsonData=a;var c=this.meta,d=this.recordType,e=d.prototype.fields,f=e.items,g=e.length,h=false;if(typeof this.getJsonAccessor!="function"){this.getJsonAccessor=this.createAccessor}if(!this.ef||!this.getQueryRoot){if(c.successProperty){this.getSuccess=this.getJsonAccessor(c.successProperty)}if(c.root){this.getRoot=this.getJsonAccessor(c.root+".DATA");this.getQueryRoot=this.getJsonAccessor(c.root)}else{this.getRoot=a.QUERY?this.getJsonAccessor("QUERY.DATA"):this.getJsonAccessor("DATA");this.getQueryRoot=function(){return a.QUERY?a.QUERY:a}}if(c.totalProperty){this.getTotal=this.getJsonAccessor(c.totalProperty)}else if(a.TOTALROWCOUNT){this.getTotal=this.getJsonAccessor("TOTALROWCOUNT")}}var i=this.getRoot(a),j=i.length,k=j,l=true;var m=this.getQueryRoot(a).COLUMNS;for(var n=0;n<m.length;n++){m[n]=m[n].toUpperCase()}if(c.totalProperty||a.TOTALROWCOUNT){var o=parseInt(this.getTotal(a),10);if(!isNaN(o)){k=o}}if(c.successProperty){var o=this.getSuccess(a);if(o===false||o==="false"){l=false}}for(b=0;b<g;b++){var p=f[b].mapping!==undefined&&f[b].mapping!==null?f[b].mapping:f[b].name;f[b].mapArrLoc=m.indexOf(p.toUpperCase())}if(!this.ef||h===true){if(c.id){this.getId=function(a){var b=a[c.id];return b===undefined||b===""?null:b}}else{this.getId=function(){return null}}this.ef=[];for(var n=0;n<g;n++){e=f[n];var q=e.mapping!==undefined&&e.mapping!==null?e.mapping:e.name;this.ef[n]=function(a){var b=a[q];return b===undefined||b===""?null:b}}}var r=[];for(var n=0;n<j;n++){var s=i[n];var t={};for(var u=0,v=g;u<v;u++){e=f[u];var w=e.mapArrLoc!==undefined&&e.mapArrLoc!==null?e.mapArrLoc:u;var o=s[w]!==undefined?s[w]:e.defaultValue;o=e.convert(o,s);t[e.name]=o}var x=new this.recordType(t,this.getId(t));x.json=t;r[n]=x}return{success:l,records:r,totalRecords:k}}})