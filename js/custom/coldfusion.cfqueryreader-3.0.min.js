Ext.define("ColdFusion.data.reader.CFQueryReader",{extend:"Ext.data.reader.Json",alternateClassName:"ColdFusion.data.CFQueryReader",alias:"reader.cfquery",config:{totalProperty:"TOTALROWCOUNT",transform:function(e){var t=this,n={root:t.getRootProperty(),total:t.getTotalProperty(),type:t.getTypeProperty(),success:t.getSuccessProperty(),meta:t.getMetaProperty(),message:t.getMessageProperty()},r=[],i={},s={},o="";if(!n.root.length&&e.hasOwnProperty("QUERY")){n.root="QUERY";t.setRootProperty(n.root)}if(!n.root.length){var u=t.buildFromCF(e);return u.records}for(var a in n){if(!n[a].length){delete n[a]}}var f=function(e){if(typeof e==="string"||typeof e==="number")return e;var i=e.length;if(i){i|=0;var o=[];o.length=i;for(var u=0;u<i;u++){var a=e[u];o[u]=typeof a==="string"?a:f(a)}return o}else{var l={};for(var c in e){var h=false;var p=typeof c==="string"?c:String(c);var d=s[p];if(d===undefined){d=p.toLowerCase();s[p]=d}d=t.correctKey(d,n);var a=e[c];if(typeof a==="string"){l[d]=a}else if(d===n.root){var v=t.buildFromCF(a);r=v.columns;if(r.length){h=true}l[d]=v.records}else{l[d]=f(a)}if(!h){l[d]=typeof a==="string"?a:f(a)}}return l}};newData=f(e);return newData}},compareNoCase:function(e,t){return e.toUpperCase()===t.toUpperCase()},buildFromCF:function(e){var t=[];if(e.hasOwnProperty("DATA")&&e.hasOwnProperty("COLUMNS")){var n=[],r=e.DATA;t=e.COLUMNS.map(function(e){return e.toLowerCase()});for(var i=0;i<r.length;i++){var s={};for(var o=0;o<t.length;o++){s[t[o]]=r[i][o]}n.push(s)}return{records:n,columns:t}}else{return{records:e,columns:t}}},correctKey:function(e,t){var n=this;for(var r in t){if(n.compareNoCase(e,t[r])){return t[r]}}return e}})