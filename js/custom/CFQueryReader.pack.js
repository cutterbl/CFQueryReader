Ext.data.CFQueryReader=Ext.extend(Ext.data.ArrayReader,{read:function(a){var b=a.responseText;var o=eval("("+b+")");if(!o){throw{message:"CFQueryReader.read: Json object not found"}}return this.readRecords(o)},readRecords:function(o){this.jsonData=o;var s=this.meta,Record=this.recordType,f=Record.prototype.fields,fi=f.items,fl=f.length,reset=false;if(!this.ef||!this.getQueryRoot){if(s.successProperty){this.getSuccess=this.getJsonAccessor(s.successProperty)}if(s.root){this.getRoot=this.getJsonAccessor(s.root+'.DATA');this.getQueryRoot=this.getJsonAccessor(s.root)}else{this.getRoot=(o.QUERY)?this.getJsonAccessor('QUERY.DATA'):this.getJsonAccessor('DATA');this.getQueryRoot=function(){return(o.QUERY)?o.QUERY:o}}if(s.totalProperty){this.getTotal=this.getJsonAccessor(s.totalProperty)}else if(o.TOTALROWCOUNT){this.getTotal=this.getJsonAccessor('TOTALROWCOUNT')}}var d=this.getRoot(o),c=d.length,totalRecords=c,success=true;var e=this.getQueryRoot(o).COLUMNS;if(s.totalProperty||o.TOTALROWCOUNT){var v=parseInt(this.getTotal(o),10);if(!isNaN(v)){totalRecords=v}}if(s.successProperty){var v=this.getSuccess(o);if(v===false||v==='false'){success=false}}for(b=0;b<fl;b++){var g=(fi[b].mapping!==undefined&&fi[b].mapping!==null)?fi[b].mapping:fi[b].name;fi[b].mapArrLoc=e.indexOf(Ext.util.Format.uppercase(g))}if(!this.ef||reset===true){if(s.id){this.getId=function(a){var r=a[s.id];return(r===undefined||r==="")?null:r}}else{this.getId=function(){return null}}this.ef=[];for(var i=0;i<fl;i++){f=fi[i];var h=(f.mapping!==undefined&&f.mapping!==null)?f.mapping:f.name;this.ef[i]=function(a){var r=a[h];return(r===undefined||r==="")?null:r}}}var l=[];for(var i=0;i<c;i++){var n=d[i];var m={};for(var j=0,jlen=fl;j<jlen;j++){f=fi[j];var k=f.mapArrLoc!==undefined&&f.mapArrLoc!==null?f.mapArrLoc:j;var v=n[k]!==undefined?n[k]:f.defaultValue;v=f.convert(v,n);m[f.name]=v}var p=new this.recordType(m,this.getId(m));p.json=m;l[i]=p}return{success:success,records:l,totalRecords:totalRecords}}});